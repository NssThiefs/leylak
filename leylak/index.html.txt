<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sana √ñzel S√ºrpriz ‚ù§Ô∏èüåä</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        /* --- MODERN DENƒ∞Z & NEON TEMASI --- */
        :root {
            --primary: #ff2e63;      /* Canlƒ± Neon Pembe */
            --secondary: #08d9d6;    /* Neon Turkuaz */
            --bg-dark: #252a34;      /* Koyu Arka Plan */
            --glass: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.2);
        }

        body {
            margin: 0; padding: 0;
            background: radial-gradient(circle at center, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            font-family: 'Montserrat', sans-serif;
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; text-align: center;
            color: white;
            position: relative;
        }

        /* I≈ûIK VE EFEKTLER */
        .ocean-overlay {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(8, 217, 214, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 80% 80%, rgba(255, 46, 99, 0.1) 0%, transparent 20%);
            z-index: 0; pointer-events: none;
        }

        .particle {
            position: absolute; background: white; border-radius: 50%;
            opacity: 0.3; animation: floatUp linear infinite;
        }

        /* ANA KUTU */
        .container {
            background: var(--glass);
            padding: 40px 30px;
            border-radius: 30px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            max-width: 90%; width: 450px;
            position: relative; z-index: 10;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        h1 {
            font-family: 'Pacifico', cursive;
            color: var(--primary);
            font-size: 2.5rem; margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 46, 99, 0.5);
        }

        p { color: #eaeaea; margin-bottom: 25px; font-weight: 400; line-height: 1.6; }

        .btn {
            background: linear-gradient(135deg, var(--primary), #ff0055);
            color: white; border: none; padding: 14px 40px;
            border-radius: 50px; font-size: 1.1rem; cursor: pointer;
            font-weight: 700; letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(255, 46, 99, 0.4);
            transition: all 0.3s ease; margin: 10px;
            position: relative; z-index: 20;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(255, 46, 99, 0.6); }

        /* KA√áAN BUTON STƒ∞Lƒ∞ */
        #noBtn {
            position: absolute; 
            transition: top 0.1s ease, left 0.1s ease; 
            z-index: 9999; /* En √ºstte olsun */
        }

        /* ADAM ASMACA & Dƒ∞ƒûER UI */
        .word-container {
            display: flex; justify-content: center; gap: 8px; flex-wrap: wrap;
            margin: 30px 0; min-height: 50px;
        }
        .letter-box {
            width: 40px; height: 50px;
            border: 2px solid var(--secondary);
            border-radius: 10px;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.8rem; font-weight: 800;
            color: var(--secondary);
            text-shadow: 0 0 5px var(--secondary);
            background: rgba(8, 217, 214, 0.1);
        }
        .letter-box.filled {
            background: var(--secondary); color: #1a1a2e;
            transform: scale(1.1); text-shadow: none;
        }

        .keyboard {
            display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px;
            margin-top: 20px;
        }
        .key {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 10px 0; border-radius: 8px;
            font-weight: 600; cursor: pointer; transition: 0.2s;
        }
        .key:hover { background: rgba(255,255,255,0.3); }
        .key.correct { background: var(--secondary); color: #1a1a2e; pointer-events: none;}
        .key.wrong { background: #555; color: #888; pointer-events: none;}

        .puzzle-wrapper { display: flex; justify-content: center; margin-bottom: 20px; }
        .puzzle-container {
            width: 300px; height: 300px; 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px;
            border: 4px solid var(--secondary); 
            box-shadow: 0 0 20px rgba(8, 217, 214, 0.3);
            background-color: rgba(0,0,0,0.5); 
        }
        .puzzle-piece {
            width: 100%; height: 100%;
            background-size: 300px 300px;
            background-repeat: no-repeat;
            cursor: pointer; border-radius: 2px;
            transition: transform 0.2s;
        }
        .puzzle-piece.selected {
            filter: brightness(1.3) sepia(1) hue-rotate(180deg);
            transform: scale(0.95); z-index: 5;
            box-shadow: 0 0 10px white;
        }
        .full-image {
            width: 300px; height: auto; border-radius: 15px; display: none;
            border: 4px solid var(--secondary); margin: 0 auto;
        }
        
        .video-container iframe { width: 100%; height: 250px; border-radius: 15px; border: none; }
        .hidden { display: none !important; }
        
        @keyframes floatUp { 0% { transform: translateY(100vh); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-10vh); opacity: 0; } }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-10px)} 75%{transform:translateX(10px)} }

        @media (max-width: 480px) {
            .keyboard { grid-template-columns: repeat(6, 1fr); }
            .letter-box { width: 30px; height: 40px; font-size: 1.4rem; }
            h1 { font-size: 2rem; }
            .container { padding: 20px; width: 95%; }
            .puzzle-container { width: 240px; height: 240px; }
            .puzzle-piece { background-size: 240px 240px; }
            .full-image { width: 240px; }
        }
    </style>
</head>
<body>

    <div class="ocean-overlay"></div>
    <div id="particles"></div>

    <div id="stage1" class="container">
        <h1>Kelimeleri Bul</h1>
        <div id="lives" style="font-size: 1.5rem; margin-bottom: 10px;">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <p id="questionText" style="font-size: 1.1rem; color: #ccc;">Y√ºkleniyor...</p>
        <div id="wordDisplay" class="word-container"></div>
        <div id="keyboard" class="keyboard"></div>
        <p id="progress" style="font-size: 0.8rem; opacity: 0.6; margin-top: 20px;">1 / 3</p>
    </div>

    <div id="stage2" class="container hidden">
        <h1>Minik Bir Soru?</h1>
        <p>T√ºm bu maceralara raƒümen, benimle misin?</p>
        <div style="height: 300px; position: relative; display: flex; justify-content: center; align-items: center;">
            <button class="btn" style="z-index: 5;" onclick="nextStage(3)">EVET!</button>
            <button class="btn" id="noBtn" style="background: #555 !important;">HAYIR</button>
        </div>
    </div>

    <div id="stage3" class="container hidden">
        <h1>Anƒ±yƒ± Tamamla (1/2)</h1>
        <p>Par√ßalara tƒ±kla ve yerlerini deƒüi≈ütir.</p>
        <div class="puzzle-wrapper">
            <div class="puzzle-container" id="puzzle1"></div>
        </div>
        <img src="" class="full-image" id="fullImage1">
        <br>
        <button class="btn hidden" id="puzzleNext1" onclick="nextStage(4)">Devam Et ‚ûù</button>
    </div>

    <div id="stage4" class="container hidden">
        <h1>Anƒ±yƒ± Tamamla (2/2)</h1>
        <p>Son bir adƒ±m kaldƒ±...</p>
        <div class="puzzle-wrapper">
            <div class="puzzle-container" id="puzzle2"></div>
        </div>
        <img src="" class="full-image" id="fullImage2">
        <br>
        <button class="btn hidden" id="puzzleNext2" onclick="nextStage(5)">S√ºrprize Git üéÅ</button>
    </div>

    <div id="stage5" class="container hidden">
        <h1>ƒ∞yi ki Varsƒ±n...</h1>
        <p>Bu senin i√ßindi.</p>
        <div class="video-container">
            <iframe id="finalVideo" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <p style="margin-top: 20px; color: var(--primary);">‚ù§Ô∏è Seni Seviyorum ‚ù§Ô∏è</p>
    </div>

    <script>
        // ==========================================
        // --- AYARLAR KISMI ---
        // ==========================================

        const questions = [
            { q: "ƒ∞lk izlediƒüimiz filmin adƒ± neydi?", a: "titanic" },
            { q: "En sevdiƒüim yemek hangisi?", a: "pizza" },
            { q: "Burcum ne?", a: "aslan" }
        ];

        // Fotoƒüraflar (Kendi linklerini buraya yapƒ±≈ütƒ±r)
        const puzzlePhotos = [
            "https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=600",
            "https://images.unsplash.com/photo-1523438885200-e635ba2c371e?q=80&w=600"
        ];

        // Video ID
        const videoID = "dQw4w9WgXcQ";

        // ==========================================

        let qIndex = 0;
        let lives = 5;
        let currentWord = "";
        let guessed = [];
        const alphabet = "abc√ßdefgƒühƒ±ijklmno√∂prs≈ütu√ºvyz";

        window.onload = function() {
            createParticles();
            loadGame();
            initNoButton(); 
            document.getElementById('finalVideo').src = `https://www.youtube.com/embed/${videoID}?autoplay=1&rel=0`;
        };

        // --- ADAM ASMACA ---
        function loadGame() {
            currentWord = questions[qIndex].a;
            guessed = [];
            lives = 5;
            updateLives();
            document.getElementById('questionText').innerText = questions[qIndex].q;
            document.getElementById('progress').innerText = `${qIndex + 1} / ${questions.length}`;

            const display = document.getElementById('wordDisplay');
            display.innerHTML = '';
            for (let char of currentWord) {
                let box = document.createElement('div');
                box.className = 'letter-box';
                if (char === ' ') {
                    box.style.border = 'none'; box.style.background = 'transparent';
                }
                display.appendChild(box);
            }

            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            alphabet.split('').forEach(letter => {
                let key = document.createElement('div');
                key.innerText = letter.toUpperCase();
                key.className = 'key';
                key.onclick = () => handleGuess(letter, key);
                keyboard.appendChild(key);
            });
        }

        function handleGuess(letter, keyBtn) {
            if (guessed.includes(letter) || lives <= 0) return;
            guessed.push(letter);

            if (currentWord.includes(letter)) {
                keyBtn.classList.add('correct');
                const boxes = document.querySelectorAll('.letter-box');
                let won = true;
                for (let i = 0; i < currentWord.length; i++) {
                    if (currentWord[i] === letter) {
                        boxes[i].innerText = letter.toUpperCase();
                        boxes[i].classList.add('filled');
                    }
                    if (currentWord[i] !== ' ' && boxes[i].innerText === '') won = false;
                }
                if (won) setTimeout(() => {
                    qIndex++;
                    if (qIndex < questions.length) loadGame();
                    else nextStage(2);
                }, 1000);
            } else {
                keyBtn.classList.add('wrong');
                lives--;
                updateLives();
                document.getElementById('stage1').classList.add('shake');
                setTimeout(() => document.getElementById('stage1').classList.remove('shake'), 500);
                if (lives === 0) setTimeout(() => { alert("Tekrar deneyelim!"); loadGame(); }, 500);
            }
        }
        function updateLives() { document.getElementById('lives').innerText = "‚ù§Ô∏è".repeat(lives) + "üñ§".repeat(5-lives); }

        // --- KA√áAN BUTON (G√úVENLƒ∞ ALAN G√úNCELLEMESƒ∞) ---
        function initNoButton() {
            const btn = document.getElementById('noBtn');
            
            const moveBtn = (e) => {
                e.preventDefault(); 
                
                // 1. Ekran boyutlarƒ±nƒ± al
                const winWidth = window.innerWidth;
                const winHeight = window.innerHeight;
                
                // 2. Butonun kendi boyutlarƒ±nƒ± al (√ñnemli!)
                const btnWidth = btn.offsetWidth;
                const btnHeight = btn.offsetHeight;
                
                // 3. Kenarlardan bo≈üluk bƒ±rak (Padding)
                const padding = 20;

                // 4. Gidebileceƒüi maksimum koordinatƒ± hesapla
                // (Ekran Geni≈üliƒüi - Buton Geni≈üliƒüi - Bo≈üluk)
                const maxX = winWidth - btnWidth - padding;
                const maxY = winHeight - btnHeight - padding;

                // 5. Rastgele sayƒ± √ºret
                const newX = Math.random() * maxX;
                const newY = Math.random() * maxY;
                
                // 6. Uygula (Math.max(padding, ...) diyerek sol ve √ºst sƒ±nƒ±rƒ±n 0 olmamasƒ±nƒ± saƒüla)
                btn.style.position = 'fixed';
                btn.style.left = Math.max(padding, newX) + 'px';
                btn.style.top = Math.max(padding, newY) + 'px';
            };

            btn.addEventListener('mouseover', moveBtn); 
            btn.addEventListener('touchstart', moveBtn); 
            btn.addEventListener('click', moveBtn); 
        }

        // --- PUZZLE ---
        let selectedPiece = null;
        function startPuzzle(stageNum, photoUrl) {
            const container = document.getElementById(stageNum === 3 ? 'puzzle1' : 'puzzle2');
            const size = 3; let pieces = [];
            
            const isMobile = window.innerWidth <= 480;
            const bgSize = isMobile ? "240px 240px" : "300px 300px";

            for (let i = 0; i < size * size; i++) {
                let piece = document.createElement('div'); piece.className = 'puzzle-piece';
                piece.style.backgroundImage = `url('${photoUrl}')`;
                piece.style.backgroundSize = bgSize; 
                
                let row = Math.floor(i / size); let col = i % size;
                piece.style.backgroundPosition = `${col * 50}% ${row * 50}%`; 
                
                piece.dataset.index = i;
                piece.onclick = function() { handlePieceClick(this, stageNum); };
                pieces.push(piece);
            }
            pieces.sort(() => Math.random() - 0.5);
            container.innerHTML = ""; pieces.forEach(p => container.appendChild(p));
        }

        function handlePieceClick(piece, stageNum) {
            const nextBtn = document.getElementById(stageNum === 3 ? 'puzzleNext1' : 'puzzleNext2');
            if (!nextBtn.classList.contains('hidden')) return; 

            if (!selectedPiece) { selectedPiece = piece; piece.classList.add('selected'); } 
            else {
                let parent = piece.parentNode;
                let next = piece.nextSibling === selectedPiece ? piece : piece.nextSibling;
                const ph = document.createTextNode(''); parent.insertBefore(ph, selectedPiece);
                parent.insertBefore(selectedPiece, piece); parent.insertBefore(piece, ph); parent.removeChild(ph);
                
                selectedPiece.classList.remove('selected'); selectedPiece = null;
                
                let correct = true;
                const kids = parent.children;
                for(let i=0; i<kids.length; i++) if(parseInt(kids[i].dataset.index) !== i) correct = false;
                
                if(correct) {
                    parent.parentElement.style.display = 'none';
                    let img = document.getElementById(stageNum===3 ? 'fullImage1':'fullImage2');
                    img.src = puzzlePhotos[stageNum===3?0:1]; img.style.display='block';
                    nextBtn.classList.remove('hidden');
                }
            }
        }

        function nextStage(n) {
            document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
            document.getElementById('stage'+n).classList.remove('hidden');
            if(n===3) startPuzzle(3, puzzlePhotos[0]);
            if(n===4) startPuzzle(4, puzzlePhotos[1]);
        }

        function createParticles() {
            const pContainer = document.getElementById('particles');
            for(let i=0; i<30; i++) {
                let p = document.createElement('div'); p.className = 'particle';
                let s = Math.random()*5+2+'px';
                p.style.width=s; p.style.height=s; 
                p.style.left=Math.random()*100+'%'; p.style.top=Math.random()*100+'%';
                p.style.animationDuration = Math.random()*20+10+'s';
                pContainer.appendChild(p);
            }
        }
    </script>
</body>
</html>